{"ast":null,"code":"import axios from\"axios\";import React,{useState}from\"react\";import{getCookie,setCookie}from\"../Cookie/Cookie\";import Test from\"../Test\";import{useDispatch}from\"react-redux\";import{logIn}from\"../reducer/actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[userId,setUserId]=useState('');const[password,setPassword]=useState('');const url=process.env.REACT_APP_HOST_URL;//const url = process.env.REACT_APP_TEST_URL;\nconst config={\"Content-Type\":'application/json'};const dispatch=useDispatch();const onLogIn=data=>{dispatch(data,{type:'LOGIN'});};const loginEvent=e=>{e.preventDefault();const loginForm=document.getElementById(\"loginForm\");setUserId(loginForm.elements[0].value);setPassword(loginForm.elements[1].value);let user={'id':userId,'password':password};console.log(JSON.stringify(user));axios.post(\"\".concat(url,\"/logIn\"),user).then(res=>{console.log(res.data);if(res.data.response===\"로그인 성공\"){console.log(res.data.tokenDto);setCookie(\"accessToken\",\"\".concat(res.data.tokenDto.accessToken),{path:'/',expires:new Date(Date.now()+3600*1000)});setCookie(\"refreshToken\",\"\".concat(res.data.tokenDto.refreshToken),{path:'/',expires:new Date(Date.now()+3600*1000)});setCookie(\"key\",\"\".concat(res.data.tokenDto.key),{path:'/',expires:new Date(Date.now()+3600*1000)});setCookie(\"nickName\",\"\".concat(res.data.nickName),{path:'/',expires:new Date(Date.now()+3600*1000)});window.location.replace('/');}}).catch(err=>{console.log(err.data);});};const onChangeEvent=e=>{if(e.target.id===\"idInput\"){setUserId(e.target.value);}else if(e.target.id===\"passwordInput\"){setPassword(e.target.value);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-sm\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"mx-auto h-10 w-auto\",src:\"https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=600\",alt:\"Your Company\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900\",children:\"LogIn to your account\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-2 border-gray-100 p-5 mt-10 sm:mx-auto sm:w-full sm:max-w-sm\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-6\",id:\"loginForm\",onSubmit:loginEvent,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium leading-6 text-gray-900\",children:\"\\uC544\\uC774\\uB514\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"input\",{class:\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300\",id:\"idInput\",onChange:onChangeEvent})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"label\",{for:\"password\",class:\"block text-sm font-medium leading-6 text-gray-900\",children:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"div\",{class:\"text-sm\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",class:\"font-semibold text-indigo-600 hover:text-indigo-500\",children:\"Forgot password?\"})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"mt-2\",children:/*#__PURE__*/_jsx(\"input\",{onChange:onChangeEvent,id:\"passwordInput\",name:\"password\",type:\"password\",autocomplete:\"current-password\",required:true,class:\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",class:\"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\",children:\"Log in\"})})]})})]});};export default Login;","map":{"version":3,"names":["axios","React","useState","getCookie","setCookie","Test","useDispatch","logIn","jsx","_jsx","jsxs","_jsxs","Login","userId","setUserId","password","setPassword","url","process","env","REACT_APP_HOST_URL","config","dispatch","onLogIn","data","type","loginEvent","e","preventDefault","loginForm","document","getElementById","elements","value","user","console","log","JSON","stringify","post","concat","then","res","response","tokenDto","accessToken","path","expires","Date","now","refreshToken","key","nickName","window","location","replace","catch","err","onChangeEvent","target","id","className","children","src","alt","onSubmit","class","onChange","for","href","name","autocomplete","required"],"sources":["C:/Users/lshls/OneDrive/바탕 화면/front/src/Login/Login.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useState } from \"react\";\r\nimport { getCookie, setCookie } from \"../Cookie/Cookie\";\r\nimport Test from \"../Test\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { logIn } from \"../reducer/actions\";\r\nconst Login = () => {\r\n\r\n    const [userId, setUserId] = useState('')\r\n    const [password, setPassword] = useState('')\r\n\r\n    const url = process.env.REACT_APP_HOST_URL;\r\n    //const url = process.env.REACT_APP_TEST_URL;\r\n\r\n    const config = { \"Content-Type\": 'application/json' };\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onLogIn = (data) => {\r\n        dispatch(data, { type: 'LOGIN' });\r\n    }\r\n    const loginEvent = (e) => {\r\n\r\n        e.preventDefault();\r\n\r\n        const loginForm = document.getElementById(\"loginForm\");\r\n\r\n        setUserId(loginForm.elements[0].value);\r\n        setPassword(loginForm.elements[1].value);\r\n\r\n\r\n\r\n\r\n        let user = {\r\n            'id': userId,\r\n            'password': password\r\n        };\r\n\r\n        console.log(JSON.stringify(user))\r\n\r\n        axios.post(`${url}/logIn`, user)\r\n            .then((res) => {\r\n                console.log(res.data);\r\n\r\n                if (res.data.response === \"로그인 성공\") {\r\n                    console.log(res.data.tokenDto);\r\n                    setCookie(\"accessToken\", `${res.data.tokenDto.accessToken}`, {\r\n                        path: '/',\r\n                        expires: new Date(Date.now() + 3600 * 1000)\r\n                    })\r\n\r\n                    setCookie(\"refreshToken\", `${res.data.tokenDto.refreshToken}`, {\r\n                        path: '/',\r\n                        expires: new Date(Date.now() + 3600 * 1000)\r\n                    })\r\n\r\n                    setCookie(\"key\", `${res.data.tokenDto.key}`, {\r\n                        path: '/',\r\n                        expires: new Date(Date.now() + 3600 * 1000)\r\n                    })\r\n\r\n\r\n                    setCookie(\"nickName\", `${res.data.nickName}`, {\r\n                        path: '/',\r\n                        expires: new Date(Date.now() + 3600 * 1000)\r\n                    })\r\n\r\n\r\n\r\n                    window.location.replace('/')\r\n\r\n\r\n\r\n\r\n                }\r\n\r\n\r\n            })\r\n            .catch((err) => {\r\n                console.log(err.data);\r\n            })\r\n    }\r\n\r\n    const onChangeEvent = (e) => {\r\n\r\n\r\n        if (e.target.id === \"idInput\") {\r\n            setUserId(e.target.value);\r\n        }\r\n        else if (e.target.id === \"passwordInput\") {\r\n            setPassword(e.target.value);\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8\">\r\n\r\n            <div className=\"sm:mx-auto sm:w-full sm:max-w-sm\">\r\n                <img className=\"mx-auto h-10 w-auto\" src=\"https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=600\" alt=\"Your Company\" />\r\n                <h2 className=\"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900\">LogIn to your account</h2>\r\n            </div>\r\n            <div className=\"border-2 border-gray-100 p-5 mt-10 sm:mx-auto sm:w-full sm:max-w-sm\">\r\n\r\n                <form className=\"space-y-6\" id=\"loginForm\" onSubmit={loginEvent}>\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium leading-6 text-gray-900\">아이디</label>\r\n                        <div className=\"mt-2\">\r\n                            <input class=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300\"\r\n                                id=\"idInput\" onChange={onChangeEvent}></input>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <div>\r\n                        <div class=\"flex items-center justify-between\">\r\n                            <label for=\"password\" class=\"block text-sm font-medium leading-6 text-gray-900\">비밀번호</label>\r\n                            <div class=\"text-sm\">\r\n                                <a href=\"#\" class=\"font-semibold text-indigo-600 hover:text-indigo-500\">Forgot password?</a>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"mt-2\">\r\n                            <input onChange = {onChangeEvent} id=\"passwordInput\" name=\"password\" type=\"password\" autocomplete=\"current-password\" required class=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"/>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div>\r\n                        <button type=\"submit\" class=\"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\">Log in</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import axios from\"axios\";import{useEffect,useState}from\"react\";import{useLocation}from\"react-router\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";let currentPath=\"\";const PostTable=props=>{//const url = \"http://localhost:8080\"\nconst[postList,setPostList]=useState([]);const urlParams=new URLSearchParams(window.location.search);let location=useLocation();const[page,setPage]=useState(1);// 현재 페이지 수\nconst pageRange=5;// 페이지당 보여줄 게시물 수\nconst[btnRange,setBtnRange]=useState(5);// 보여질 페이지 버튼의 개수\n//const startPage = (currentSet - 1) * btnRange + 1; // 현재 보여질 버튼의 첫번째 수\nconst[startPage,setStartPage]=useState(1);const[totalSet,setTotalSet]=useState(0);const startPost=(page-1)*pageRange+1;// 시작 게시물 번호\nconst endPost=startPost+pageRange-1;// 끝 게시물 번호\nuseEffect(()=>{let params;if(props.keyWord.length===0){//params = `${url}/post/list`\nparams='/post/list';}else{//params = `${url}/post/search?keyWord=${urlParams.get(\"keyWord\")}`\nparams=\"/post/search?keyWord=\".concat(urlParams.get(\"keyWord\"));}axios.get(params).then(res=>{setPostList(res.data);setTotalSet(Math.ceil(postList.length/pageRange));}).catch(err=>{console.log(err);});},[location]);useEffect(()=>{setTotalSet(Math.ceil(postList.length/pageRange));},[postList,page]);const trClickEvent=no=>{window.location.href=\"/post?no=\".concat(no);};const prevPage=page=>{setPage(page);if(page%5===0){setStartPage(page-4);}};const nextPage=page=>{setPage(page);if(page%5===1&&page/5>0){setStartPage(page);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto sm:-mx-6 lg:-mx-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inline-block min-w-full py-2 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-hidden\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-left text-sm font-light text-surface dark:text-white\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"border-b border-neutral-200 font-medium dark:border-white/10\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-4\",children:\"\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-4\",children:\"\\uC81C\\uBAA9\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",className:\"px-6 py-4\",children:\"\\uC791\\uC131\\uC790\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:postList.slice(startPost-1,endPost).map((value,index)=>{let nickName=value.userDto.nickName;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-b border-neutral-200 transition duration-300 ease-in-out hover:bg-neutral-100 dark:border-white/10 dark:hover:bg-neutral-600\",onClick:()=>{trClickEvent(value.no);},children:[/*#__PURE__*/_jsx(\"td\",{className:\"whitespace-nowrap px-6 py-4 font-medium\",children:value.no}),/*#__PURE__*/_jsx(\"td\",{className:\"whitespace-nowrap px-6 py-4\",children:value.title}),/*#__PURE__*/_jsx(\"td\",{className:\"whitespace-nowrap px-6 py-4\",children:nickName})]},index);})})]})})})}),/*#__PURE__*/_jsxs(\"ul\",{className:\"flex justify-center mt-3 font-white-100 \",children:[page>1&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"relative block rounded bg-transparent px-3 py-1.5 text-sm text-surface transition duration-300 hover:bg-neutral-300 focus:bg-neutral-100 focus:text-primary-700 focus:outline-none focus:ring-0 active:bg-neutral-100 active:text-primary-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:focus:text-primary-500 dark:active:bg-neutral-700 dark:active:text-primary-500\",onClick:()=>prevPage(page-1),$active:false,children:\"prev\"},0)}),Array(btnRange).fill().map((value,i)=>{return/*#__PURE__*/_jsx(\"li\",{children:startPage+i<=totalSet?/*#__PURE__*/_jsx(\"a\",{className:\"relative block rounded bg-transparent px-3 py-1.5 text-sm text-surface transition duration-300 hover:bg-neutral-300 focus:bg-neutral-100 focus:text-primary-700 focus:outline-none focus:ring-0 active:bg-neutral-100 active:text-primary-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:focus:text-primary-500 dark:active:bg-neutral-700 dark:active:text-primary-500\",id:startPage+i,onClick:()=>{setPage(startPage+i);},children:startPage+i},i):/*#__PURE__*/_jsx(_Fragment,{})});}),totalSet>page&&/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{className:\"relative block rounded bg-transparent px-3 py-1.5 text-sm text-surface transition duration-300 hover:bg-neutral-300 focus:bg-neutral-100 focus:text-primary-700 focus:outline-none active:bg-neutral-100 active:text-primary-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:focus:text-primary-500 dark:active:bg-neutral-700 dark:active:text-primary-500\",onClick:()=>nextPage(page+1),$active:false,children:\"next\"},7)})]})]});};export default PostTable;","map":{"version":3,"names":["axios","useEffect","useState","useLocation","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","currentPath","PostTable","props","postList","setPostList","urlParams","URLSearchParams","window","location","search","page","setPage","pageRange","btnRange","setBtnRange","startPage","setStartPage","totalSet","setTotalSet","startPost","endPost","params","keyWord","length","concat","get","then","res","data","Math","ceil","catch","err","console","log","trClickEvent","no","href","prevPage","nextPage","className","children","scope","slice","map","value","index","nickName","userDto","onClick","title","$active","Array","fill","i","id"],"sources":["C:/Users/lshls/OneDrive/바탕 화면/front/src/Main/PostTable.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useLocation } from \"react-router\";\r\n\r\nlet currentPath = \"\";\r\n\r\nconst PostTable = (props) => {\r\n\r\n    //const url = \"http://localhost:8080\"\r\n\r\n    const [postList, setPostList] = useState([]);\r\n    const urlParams = new URLSearchParams(window.location.search)\r\n    let location = useLocation();\r\n\r\n\r\n    const [page, setPage] = useState(1); // 현재 페이지 수\r\n    const pageRange = 5; // 페이지당 보여줄 게시물 수\r\n    const [btnRange, setBtnRange] = useState(5); // 보여질 페이지 버튼의 개수\r\n\r\n    //const startPage = (currentSet - 1) * btnRange + 1; // 현재 보여질 버튼의 첫번째 수\r\n    const [startPage, setStartPage] = useState(1);\r\n    const [totalSet, setTotalSet] = useState(0);\r\n    const startPost = (page - 1) * pageRange + 1; // 시작 게시물 번호\r\n    const endPost = startPost + pageRange - 1; // 끝 게시물 번호\r\n\r\n    useEffect(() => {\r\n\r\n        let params;\r\n\r\n        if (props.keyWord.length === 0) {\r\n\r\n            //params = `${url}/post/list`\r\n            params ='/post/list'\r\n\r\n        }\r\n        else {\r\n            //params = `${url}/post/search?keyWord=${urlParams.get(\"keyWord\")}`\r\n            params = `/post/search?keyWord=${urlParams.get(\"keyWord\")}`\r\n        \r\n        }\r\n\r\n        axios.get(params)\r\n            .then((res) => {\r\n                setPostList(res.data);\r\n                setTotalSet(Math.ceil(postList.length / pageRange))\r\n                \r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n\r\n\r\n    }, [location])\r\n\r\n    useEffect(() => {\r\n        setTotalSet(Math.ceil(postList.length / pageRange))\r\n        \r\n    }, [postList , page])\r\n\r\n    const trClickEvent = (no) => {\r\n\r\n        window.location.href = `/post?no=${no}`;\r\n\r\n    }\r\n\r\n    const prevPage = (page) => {\r\n        setPage(page)\r\n\r\n        if (page % 5 === 0) {\r\n            setStartPage(page - 4)\r\n        }\r\n    }\r\n\r\n    const nextPage = (page) => {\r\n\r\n        setPage(page)\r\n\r\n        if (page % 5 === 1 && page / 5 > 0) {\r\n            setStartPage(page)\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"flex flex-col\">\r\n            <div className=\"overflow-x-auto sm:-mx-6 lg:-mx-8\">\r\n                <div className=\"inline-block min-w-full py-2 sm:px-6 lg:px-8\">\r\n                    <div className=\"overflow-hidden\">\r\n                        <table\r\n                            className=\"min-w-full text-left text-sm font-light text-surface dark:text-white\">\r\n                            <thead\r\n                                className=\"border-b border-neutral-200 font-medium dark:border-white/10\">\r\n                                <tr>\r\n                                    <th scope=\"col\" className=\"px-6 py-4\">번호</th>\r\n                                    <th scope=\"col\" className=\"px-6 py-4\">제목</th>\r\n                                    <th scope=\"col\" className=\"px-6 py-4\">작성자</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n\r\n\r\n                                {\r\n                                    postList.slice(startPost - 1, endPost).map((value, index) => {\r\n                                        let nickName = value.userDto.nickName;\r\n                                        return (\r\n                                            <tr className=\"border-b border-neutral-200 transition duration-300 ease-in-out hover:bg-neutral-100 dark:border-white/10 dark:hover:bg-neutral-600\"\r\n\r\n                                                key={index} onClick={() => { trClickEvent(value.no) }}>\r\n                                                <td className=\"whitespace-nowrap px-6 py-4 font-medium\" >{value.no}</td>\r\n                                                <td className=\"whitespace-nowrap px-6 py-4\">{value.title}</td>\r\n                                                <td className=\"whitespace-nowrap px-6 py-4\">{nickName}</td>\r\n                                            </tr>\r\n                                        )\r\n                                    })\r\n                                }\r\n\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            <ul className=\"flex justify-center mt-3 font-white-100 \">\r\n\r\n                {\r\n                    page > 1 && (\r\n                        <li>\r\n                            <a\r\n                                key={0}\r\n                                className=\"relative block rounded bg-transparent px-3 py-1.5 text-sm text-surface transition duration-300 hover:bg-neutral-300 focus:bg-neutral-100 focus:text-primary-700 focus:outline-none focus:ring-0 active:bg-neutral-100 active:text-primary-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:focus:text-primary-500 dark:active:bg-neutral-700 dark:active:text-primary-500\"\r\n                                onClick={() => prevPage(page - 1)} $active={false}>\r\n                                prev\r\n                            </a>\r\n                        </li>\r\n\r\n                    )}\r\n\r\n                {\r\n                    Array(btnRange).fill()\r\n                        .map((value, i) => {\r\n                            return (\r\n                                <li>\r\n                                    {\r\n                                        startPage + i <= totalSet ?\r\n                                            <a\r\n                                                className=\"relative block rounded bg-transparent px-3 py-1.5 text-sm text-surface transition duration-300 hover:bg-neutral-300 focus:bg-neutral-100 focus:text-primary-700 focus:outline-none focus:ring-0 active:bg-neutral-100 active:text-primary-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:focus:text-primary-500 dark:active:bg-neutral-700 dark:active:text-primary-500\"\r\n                                                id={startPage + i}\r\n                                                key={i}\r\n                                                onClick={() => { setPage(startPage + i) }}\r\n                                            >\r\n                                                {startPage + i}\r\n                                            </a> :\r\n                                            <></>\r\n\r\n                                    }\r\n\r\n                                </li>\r\n                            );\r\n                        })\r\n                }\r\n\r\n                {\r\n                    totalSet > page &&\r\n                    (\r\n                        <li>\r\n                            <a\r\n                                key={7}\r\n                                className=\"relative block rounded bg-transparent px-3 py-1.5 text-sm text-surface transition duration-300 hover:bg-neutral-300 focus:bg-neutral-100 focus:text-primary-700 focus:outline-none active:bg-neutral-100 active:text-primary-700 dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 dark:focus:text-primary-500 dark:active:bg-neutral-700 dark:active:text-primary-500\"\r\n                                onClick={() => nextPage(page + 1)} $active={false}>\r\n                                next\r\n\r\n                            </a>\r\n                        </li>\r\n\r\n                    )}\r\n            </ul>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostTable;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
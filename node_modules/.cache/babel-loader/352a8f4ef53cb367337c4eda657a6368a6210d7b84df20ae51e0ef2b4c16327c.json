{"ast":null,"code":"import axios from\"axios\";import{getCookie}from\"../Cookie/Cookie\";import{useEffect,useState}from\"react\";import{useLocation,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Write=()=>{const[title,setTitle]=useState('');const[content,setContent]=useState('');const[no,setNo]=useState(-1);const location=useLocation();const navigate=useNavigate();useEffect(()=>{if(location.state!==null){setTitle(location.state.title);setContent(location.state.content);setNo(location.state.postNo);}},[]);const checkEvent=e=>{e.preventDefault();//새로운글 작성시\nif(no===-1){writingRegisterEvent(e);}else{editPost(e);}};//수정 이벤트\nconst editPost=e=>{const title=e.target[\"title\"].value;const content=e.target['content'].value;const data={'title':title,'content':content,'no':no};axios.put(\"/post/edit\",data,{headers:{'Authorization':\"Bearer \"+getCookie(\"accessToken\"),'Content-Type':'application/json'}}).then(res=>{console.log(res.data);//window.location.href = \"/\";\nnavigate(-1);}).catch(err=>{console.log(err);});};//새글 작성 이벤트\nconst writingRegisterEvent=e=>{console.log(\"writingRegisterEvent Activated\");const title=e.target[\"title\"].value;if(title===\"\"){alert(\"제목을 입력해주세요\");return;}const content=e.target['content'].value;console.log(title,content);const data={'title':title,'content':content,'userDto':null};axios.post(\"/post/write\",data,{headers:{'Authorization':\"Bearer \"+getCookie(\"accessToken\"),'Content-Type':'application/json'}}).then(res=>{console.log(res.data);window.location.href=\"/\";}).catch(err=>{console.log(err);});};const cancleButton=e=>{e.preventDefault();window.location.href=\"/\";};return/*#__PURE__*/_jsxs(\"form\",{class:\"m-5 editor mx-auto w-10/12 flex flex-col text-gray-800 border border-gray-300 p-4 shadow-lg max-w-2xl\",onSubmit:checkEvent,children:[/*#__PURE__*/_jsx(\"input\",{class:\"title bg-gray-100 border border-gray-300 p-2 mb-4 outline-none\",spellcheck:\"false\",placeholder:\"Title\",name:\"title\",defaultValue:title}),/*#__PURE__*/_jsx(\"textarea\",{class:\"description bg-gray-100 sec p-3 h-60 border border-gray-300 outline-none\",placeholder:\"\\uB0B4\\uC6A9\",name:\"content\",defaultValue:content}),/*#__PURE__*/_jsxs(\"div\",{class:\"buttons flex p-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:cancleButton,class:\"btn border border-gray-300 p-1 px-4 font-semibold cursor-pointer text-gray-500 ml-auto\",children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{class:\"btn border border-indigo-500 p-1 px-4 font-semibold cursor-pointer text-gray-200 ml-2 bg-indigo-500\",children:\"\\uB4F1\\uB85D\"})]})]});};export default Write;","map":{"version":3,"names":["axios","getCookie","useEffect","useState","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","Write","title","setTitle","content","setContent","no","setNo","location","navigate","state","postNo","checkEvent","e","preventDefault","writingRegisterEvent","editPost","target","value","data","put","headers","then","res","console","log","catch","err","alert","post","window","href","cancleButton","class","onSubmit","children","spellcheck","placeholder","name","defaultValue","onClick"],"sources":["C:/Users/lshls/OneDrive/바탕 화면/front/src/Write/Write.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { getCookie } from \"../Cookie/Cookie\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\n\r\nconst Write = () => {\r\n\r\n    const [title , setTitle] = useState('');\r\n    const [content , setContent] = useState('');\r\n    const [no , setNo] = useState(-1);\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n    useEffect( () => {\r\n        \r\n        if(location.state !== null){\r\n            setTitle(location.state.title);\r\n            setContent(location.state.content);\r\n            setNo(location.state.postNo);\r\n        }\r\n\r\n    },[]) \r\n\r\n\r\n    const checkEvent = (e) => {\r\n        e.preventDefault();\r\n        \r\n        //새로운글 작성시\r\n        if(no === -1){\r\n            writingRegisterEvent(e);\r\n        }\r\n\r\n        else{\r\n            editPost(e);\r\n        }\r\n    } \r\n\r\n    //수정 이벤트\r\n    const editPost = (e) => {\r\n        const title = e.target[\"title\"].value;\r\n        const content = e.target['content'].value;\r\n\r\n        const data = {\r\n            'title' : title,\r\n            'content' : content,\r\n            'no' : no\r\n        }\r\n\r\n        \r\n        axios.put(`/post/edit` , data , {\r\n            headers : {\r\n                'Authorization' : \"Bearer \" +  getCookie(\"accessToken\"),\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .then((res)=>{\r\n            console.log(res.data)\r\n            //window.location.href = \"/\";\r\n            navigate(-1)\r\n        })\r\n        .catch((err) =>{\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    //새글 작성 이벤트\r\n    const writingRegisterEvent = (e) =>{\r\n\r\n\r\n        console.log(\"writingRegisterEvent Activated\");\r\n\r\n        const title = e.target[\"title\"].value;\r\n\r\n        if(title === \"\"){\r\n            alert(\"제목을 입력해주세요\")\r\n            return;\r\n        }\r\n\r\n        const content = e.target['content'].value;\r\n        console.log(title, content)\r\n        \r\n        const data = {\r\n            'title' : title,\r\n            'content' : content,\r\n\r\n            'userDto' : null\r\n        }\r\n\r\n        axios.post(`/post/write` , data , {\r\n            headers : {\r\n                'Authorization' : \"Bearer \" +  getCookie(\"accessToken\"),\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n        .then((res)=>{\r\n            console.log(res.data)\r\n            window.location.href = \"/\";\r\n        })\r\n        .catch((err) =>{\r\n            console.log(err)\r\n        })\r\n\r\n    } \r\n\r\n    const cancleButton = (e) => {\r\n        e.preventDefault();\r\n\r\n        window.location.href = \"/\"\r\n    }\r\n\r\n    return(\r\n        <form  class=\"m-5 editor mx-auto w-10/12 flex flex-col text-gray-800 border border-gray-300 p-4 shadow-lg max-w-2xl\" \r\n                onSubmit={checkEvent}>\r\n            <input class=\"title bg-gray-100 border border-gray-300 p-2 mb-4 outline-none\" spellcheck=\"false\" placeholder=\"Title\" name = \"title\" defaultValue={title}></input>\r\n\r\n            <textarea class=\"description bg-gray-100 sec p-3 h-60 border border-gray-300 outline-none\" placeholder=\"내용\" name = \"content\" defaultValue={content}></textarea>\r\n            <div class=\"buttons flex p-3\">\r\n                <button onClick = {cancleButton}class=\"btn border border-gray-300 p-1 px-4 font-semibold cursor-pointer text-gray-500 ml-auto\">취소</button>\r\n                <button class=\"btn border border-indigo-500 p-1 px-4 font-semibold cursor-pointer text-gray-200 ml-2 bg-indigo-500\">등록</button>\r\n            </div>\r\n        </form>\r\n    )\r\n\r\n    \r\n}\r\n\r\nexport default Write;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}